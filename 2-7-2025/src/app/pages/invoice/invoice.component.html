<nav class="navbar">
  <button class="btn back" (click)="goBack()">‚Üê</button>
  <div class="logo">
    <a href="home.component.html" style="text-decoration: none; color: #fff">
      Grocery<span>Mart</span>
    </a>
  </div>

  <div class="links">
    <a (click)="logout()" style="cursor: pointer">Logout</a>
  </div>
</nav>

<div class="invoice-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-message">
    <p>Loading invoice...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button (click)="loadOrder()" class="retry-btn">Retry</button>
  </div>

  <!-- Invoice Content -->
  <div *ngIf="!loading && !error && order" class="invoice">
    <div class="invoice-header">
      <h2>üìÑ Invoice</h2>
      <div class="invoice-details">
        <p><strong>Order #:</strong> {{ order.id }}</p>
        <p><strong>Date:</strong> {{ formatDate(order.orderTime) }}</p>
        <p><strong>Customer:</strong> {{ order.customerName }}</p>
        <p><strong>Email:</strong> {{ order.customerEmail }}</p>
      </div>
    </div>

    <div class="invoice-items">
      <h3>Order Items</h3>
      <table class="invoice-table">
        <thead>
          <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of order.items">
            <td>{{ item.productName }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ formatPrice(item.price) }}</td>
            <td>{{ formatPrice(item.price * item.quantity) }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="summary-row">
            <td colspan="2"><strong>Total Items:</strong> {{ getTotalItems() }}</td>
            <td colspan="2"><strong>Total Amount:</strong> {{ formatPrice(order.totalAmount) }}</td>
          </tr>
        </tfoot>
      </table>
    </div>

    <div class="invoice-footer">
      <p><strong>Thank you for your order!</strong></p>
      <p>Your order has been successfully placed and will be processed soon.</p>
      <p>For any queries, please contact our customer support.</p>
    </div>
  </div>
</div>

<!-- Logout Confirmation Dialog -->
<app-confirmation-dialog
  [isVisible]="showLogoutConfirm"
  title="Confirm Logout"
  message="Are you sure you want to logout? You will be redirected to the home page."
  confirmText="Yes, Logout"
  cancelText="Cancel"
  (confirm)="confirmLogout()"
  (cancel)="cancelLogout()">
</app-confirmation-dialog>


