<button class="btn back" (click)="goBack()">‚Üê</button>

<nav class="navbar">
  <div class="logo">
    <a routerLink="/home" style="text-decoration: none; color: #fff">
      Grocery<span>Mart</span>
    </a>
  </div>
  <div class="links">
    <a routerLink="/login-selection">Login</a>
  </div>
</nav>

<div class="form-container">
  <h2>Register</h2>
  <form [formGroup]="regForm" (ngSubmit)="onSubmit()">
    <!-- Name -->
    <label for="name">Full Name</label>
    <!-- <p class="description">Enter your full name.</p> -->
    <input
      id="name"
      formControlName="name"
      type="text"
      placeholder="e.g. JohnDoe"
      [class.invalid]="isInvalid('name')"
      (blur)="onBlur('name')"
      (keypress)="onNameKeyPress($event)"
    />
    <div class="error" *ngIf="showError('name')">
      {{ getErrorMsg("name") }}
    </div>

    <!-- Email -->
    <label for="email">Email Address</label>
    <!-- <p class="description">Enter a valid email address.</p> -->
    <input
      id="email"
      formControlName="email"
      type="email"
      required
      placeholder="e.g. john.doe@example.com"
      [class.invalid]="isInvalid('email')"
      (blur)="onBlur('email')"
    />
    <div class="error" *ngIf="showError('email')">
      {{ getErrorMsg("email") }}
    </div>
    <div class="error" *ngIf="backendErrors.email">
      {{ backendErrors.email }}
    </div>

    <!-- Phone -->
    <label for="phone">Mobile Number</label>
    <!-- <p class="description">Enter your 10-digit mobile number.</p> -->
    <input
      id="phone"
      formControlName="phone"
      type="text"
      maxlength="10"
      placeholder="e.g. 9876543210 (start with 6-9)"
      [class.invalid]="isInvalid('phone')"
      (input)="enforcePhoneMaxLength()"
      (blur)="onBlur('phone')"
    />
    <div class="error" *ngIf="showError('phone')">
      {{ getErrorMsg("phone") }}
    </div>
    <div class="error" *ngIf="backendErrors.phone">
      {{ backendErrors.phone }}
    </div>

    <!-- Address -->
    <label for="address">Address</label>
    <!-- <p class="description">Enter your address.</p> -->
    <input
      id="address"
      formControlName="address"
      type="text"
      placeholder="e.g. 123 Main St, City"
      [class.invalid]="isInvalid('address')"
      (blur)="onBlur('address')"
    />
    <div class="error" *ngIf="showError('address')">
      {{ getErrorMsg("address") }}
    </div>
    <div class="error" *ngIf="backendErrors.address">
      {{ backendErrors.address }}
    </div>

    <!-- Password -->
    <label for="password">Password</label>
    <!-- <p class="description">
      Password must be at least 8 characters, include uppercase, lowercase,
      number, and symbol. -->
    <!-- </p> -->
    <input
      id="password"
      formControlName="password"
      type="password"
      placeholder="e.g. MySecret@123"
      [class.invalid]="isInvalid('password')"
      (blur)="onBlur('password')"
    />
    <div class="error" *ngIf="showError('password')">
      {{ getErrorMsg("password") }}
    </div>

    <!-- Confirm Password -->
    <label for="confirmPassword">Confirm Password</label>
    <!-- <p class="description">Re-enter your password.</p> -->
    <input
      id="confirmPassword"
      formControlName="confirmPassword"
      type="password"
      placeholder="e.g. MySecret@123"
      [class.invalid]="isInvalid('confirmPassword')"
      (blur)="onBlur('confirmPassword')"
    />
    <div class="error" *ngIf="showError('confirmPassword')">
      {{ getErrorMsg("confirmPassword") }}
    </div>

    <button type="submit" [disabled]="regForm.invalid">Sign Up</button>
  </form>

  <p>Already registered? <a routerLink="/login-selection">Go to Login</a></p>
</div>

<!-- Modal Dialog -->
<div class="modal-backdrop" *ngIf="showDialog">
  <div class="modal">
    <p>
      Registration successful!<br />You have registered with:
      <b>{{ registeredEmail }}</b>
    </p>
    <button (click)="onDialogClose()">OK</button>
  </div>
</div>
