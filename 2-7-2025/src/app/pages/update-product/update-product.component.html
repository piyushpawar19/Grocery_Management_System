<nav class="navbar">
  <button class="btn back" (click)="goBack()">‚Üê</button>
  <div class="logo">
    <a href="home.component.html" style="text-decoration: none; color: #fff">
      Grocery<span>Mart</span></a
    >
  </div>
  <!-- <input type="text" placeholder="Search groceries..." /> -->

  <div class="search-container">
    <input type="text" placeholder="Search groceries..." />
    <button type="submit">
      <i class="fa fa-search" style="color: white"></i>
    </button>
  </div>

  <div class="links">
    <!-- <a routerLink="/register">Register</a> -->
    <a routerLink="/user-dashboard/profile">Profile</a>
    <a (click)="logout()" style="cursor: pointer">Logout</a>
  </div>
</nav>

<div class="form-container">
  <h2>Update Product</h2>
  <form [formGroup]="productForm">
    <!-- Product Name -->
    <label>Name</label>
    <input
      type="text"
      formControlName="name"
      [class.invalid]="isInvalid('name')"
      [readonly]="!isEditMode"
    />
    <div class="error" *ngIf="isInvalid('name')">
      {{ getErrorMsg("name") }}
    </div>

    <!-- Description -->
    <label>Description</label>
    <textarea formControlName="description" [readonly]="!isEditMode"></textarea>

    <!-- Quantity -->
    <label>Quantity</label>
    <input
      type="number"
      formControlName="quantity"
      [class.invalid]="isInvalid('quantity')"
      [readonly]="!isEditMode"
    />
    <div class="error" *ngIf="isInvalid('quantity')">
      {{ getErrorMsg("quantity") }}
    </div>

    <!-- Image URL -->
    <label>Image URL</label>
    <input
      type="text"
      formControlName="imageUrl"
      [class.invalid]="isInvalid('imageUrl')"
      [readonly]="!isEditMode"
    />
    <div class="error" *ngIf="isInvalid('imageUrl')">
      {{ getErrorMsg("imageUrl") }}
    </div>

    <!-- Price -->
    <label>Price</label>
    <input
      type="number"
      formControlName="price"
      [class.invalid]="isInvalid('price')"
      [readonly]="!isEditMode"
    />
    <div class="error" *ngIf="isInvalid('price')">
      {{ getErrorMsg("price") }}
    </div>

    <!-- Button Section -->
    <div class="button-section">
      <!-- Show Update button when not in edit mode -->
      <button
        type="button"
        class="btn update"
        *ngIf="!isEditMode"
        (click)="enterEditMode()"
      >
        Update
      </button>

      <!-- Show Cancel and OK buttons when in edit mode -->
      <div class="edit-buttons" *ngIf="isEditMode">
        <button type="button" class="btn cancel" (click)="cancelChanges()">
          Cancel
        </button>
        <button type="button" class="btn submit" (click)="saveChanges()">
          OK
        </button>
      </div>
    </div>
  </form>
</div>

<!-- Success Dialog -->
<div class="modal-backdrop" *ngIf="showDialog">
  <div class="modal">
    <p>{{ dialogMessage }}</p>
    <button (click)="closeDialog()">OK</button>
  </div>
</div>

<!-- Error Dialog -->
<div class="modal-backdrop" *ngIf="showErrorDialog">
  <div class="modal error-modal">
    <p>{{ errorMessage }}</p>
    <button (click)="closeErrorDialog()">OK</button>
  </div>
</div>

<!-- Logout Confirmation Dialog -->
<app-confirmation-dialog
  [isVisible]="showLogoutConfirm"
  title="Confirm Logout"
  message="Are you sure you want to logout? You will be redirected to the home page."
  confirmText="Yes, Logout"
  cancelText="Cancel"
  (confirm)="confirmLogout()"
  (cancel)="cancelLogout()">
</app-confirmation-dialog>


