<!-- 
<nav class="navbar">
  <div class="logo"><a href="home.component.html" style="text-decoration:none;color: #fff;"> Grocery<span>Mgmt</span></a></div>

  <input type="text" placeholder="Search groceries..." />
  <div class="links">
    <a routerLink="/add-to-cart">Cart</a>
    <a routerLink="/user-dashboard/profile">Profile</a>
    <a (click)="logout()" style="cursor: pointer">Logout</a>
  </div>
</nav> -->

<nav class="navbar">
  <div class="logo">
    <a
      href="home.component.html"
      style="text-decoration: none; color: #fff; margin-right: -60px"
    >
      Grocery<span>Mart</span></a
    >
  </div>

  <app-search-bar
    (searchResults)="onSearchResults($event)"
    (searchError)="onSearchError($event)"
    (searchLoading)="onSearchLoading($event)"
    (clearSearch)="onClearSearch()"
  >
  </app-search-bar>

  <div class="links">
    <a routerLink="/add-to-cart">Cart</a>
    <a routerLink="/user-dashboard/profile">Profile</a>
    <a routerLink="/user-dashboard/order-history">Order History</a>
    <a (click)="logout()" style="cursor: pointer">Logout</a>
  </div>
</nav>
<section class="hero">
  <h1>Welcome to GroceryMart</h1>
  <p>Your Grocery Store's New Best Friend.</p>
  <a (click)="scrollToProducts()" class="cta-button">Get Explore</a>
</section>

<section class="products" #productsSection>
  <h2>Products</h2>

  <!-- Search Error Message -->
  <div *ngIf="searchError" class="error-message">
    {{ searchError }}
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isSearching" class="loading-message">Searching products...</div>

  <!-- No Results Message -->
  <div *ngIf="showNoResults" class="no-results-message">
    No products found matching your search.
  </div>

  <div class="grid">
    <div class="card" *ngFor="let p of filteredProducts">
      <img
        [src]="getProductImage(p)"
        [alt]="p.productName"
        (error)="onImageError($event)"
      />
      <h3>{{ p.productName }}</h3>
      <p>{{ p.productDescription }}</p>
      <span class="price">â‚¹{{ p.price }}</span>
      <div class="quantity-info">
        <span class="quantity-label">Quantity:</span>
        <span
          class="quantity-value"
          [class.low-stock]="p.quantity <= 5"
          [class.out-of-stock]="p.quantity === 0"
        >
          {{ p.quantity === 0 ? "Out of Stock" : p.quantity }}
        </span>
      </div>
      <button
        type="button"
        aria-label="Add Product to Cart"
        [disabled]="p.quantity === 0"
        (click)="addToCart(p)"
        [class.added-to-cart]="isAddedToCart(p.productId)"
      >
        {{
          p.quantity === 0
            ? "Out of Stock"
            : isAddedToCart(p.productId)
            ? "Added to Cart"
            : "Add to Cart"
        }}
      </button>
    </div>
  </div>
</section>

<!-- Logout Confirmation Dialog -->
<app-confirmation-dialog
  [isVisible]="showLogoutConfirm"
  title="Confirm Logout"
  message="Are you sure you want to logout? You will be redirected to the home page."
  confirmText="Yes, Logout"
  cancelText="Cancel"
  (confirm)="confirmLogout()"
  (cancel)="cancelLogout()"
>
</app-confirmation-dialog>
