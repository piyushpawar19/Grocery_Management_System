<nav class="navbar">
  <div class="logo">
    <a href="home.component.html" style="text-decoration: none; color: #fff">
      Grocery<span>Mart</span></a
    >
  </div>

  <app-search-bar 
    (searchResults)="onSearchResults($event)"
    (searchError)="onSearchError($event)"
    (searchLoading)="onSearchLoading($event)"
    (clearSearch)="onClearSearch()">
  </app-search-bar>

  <div class="links">
    <a routerLink="/register">Register</a>
    <a routerLink="/login-selection">Login</a>
  </div>
</nav>
<section class="hero">
  <h1>Welcome to GroceryMart</h1>
  <p>Your Grocery Store's New Best Friend.</p>
  <a href="/register" class="cta-button">Get Started</a>
</section>
<section class="products">
  <h2>Featured Products</h2>

  <!-- Search Error Message -->
  <div *ngIf="searchError" class="error-message">
    {{ searchError }}
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isSearching" class="loading-message">Searching products...</div>

  <!-- No Results Message -->
  <div *ngIf="showNoResults" class="no-results-message">
    No products found matching your search.
  </div>

  <div class="grid">
    <div class="card" *ngFor="let p of filteredProducts">
      <img src="../../../assets/images/apple.jpg" alt="{{ p.productName }}" />
      <h3>{{ p.productName }}</h3>
      <p>{{ p.productDescription }}</p>
      <span class="price">â‚¹{{ p.price }}</span>
      <span class="quantity">Qty: {{ p.quantity }}</span>
      <button
        type="button"
        aria-label="Add Product to Cart"
        (click)="onAddToCart()"
      >
        Add to Cart
      </button>
    </div>
  </div>
  <div
    *ngIf="
      filteredProducts?.length === 0 &&
      !isSearching &&
      !searchError &&
      !showNoResults
    "
    style="text-align: center; color: #888; margin-top: 2rem"
  >
    No products found.
  </div>
</section>

<!-- Modal Dialog for Login Prompt -->
<div *ngIf="showLoginDialog" class="modal-backdrop">
  <div class="modal">
    <p style="font-size: 1.2rem; color: #21382b; font-weight: 600">
      Login yourself first to add products to cart.
    </p>
    <button (click)="goToLoginSelection()">Go to Login Selection</button>
    <br />
    <button
      (click)="closeDialog()"
      style="background: #888; margin-top: 0.5rem"
    >
      Cancel
    </button>
  </div>
</div>
